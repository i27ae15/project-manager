<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Details</title>

    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
    </script>
    {% load static %}
    <!-- font awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
        integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">

    <!-- My js -->
    <script src="{% static '/assets/js/chat.js' %}" defer></script>
    <script src="{% static '/assets/js/main.js' %}"></script>

    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <link rel="stylesheet" href="{% static '/assets/css/user-details.css' %}">

    <!-- rainbow -->
    <link href="{% static '/assets/css/rainbow/blackboard.css' %}" rel="stylesheet" type="text/css">
    <script src="{% static '/assets/js/rainbow/rainbow-custom.min.js' %}" defer></script>

    <!-- my js -->
    <script src="{% static '/assets/js/user-details.js' %}" defer></script>
    <script src="{% static '/assets/js/profile.js' %}" defer></script>
</head>

<body>
    <div id="user-info">
        <div class="container bootstrap snippets bootdey">
            <div class="row">
                <div class="profile-nav col-md-3">
                    <div class="panel">
                        <div class="user-heading round">
                            <a href="{% url 'profile' username=user_info.main_info.username %}">
                                <img src="{% static user_info.other_info.profile_photo %}" alt="">
                            </a>
                            <h1>{{user_info.main_info.username}}</h1>
                        </div>

                        <ul class="nav nav-pills nav-stacked">
                            <li class="active user-info"><a href="#"> <i class="fa fa-user"></i> Profile</a></li>
                            <li onclick="activePullRequest()" class="pull-request"><a href="#"> <i
                                        class="fa fa-calendar"></i> Recent Activity
                                    <!-- <span class="label label-warning pull-right r-activity">9</span></a></li> -->
                            <li onclick="activeNewTask()" class="new-task"><a href="#"> <i
                                        class="fa fa-edit"></i>Tasks</a></li>
                        </ul>
                    </div>
                </div>
                <div class="profile-info col-md-9">
                    {% if not own_profile %}
                    <div class="panel">
                        <form>
                            <textarea placeholder="Send message" rows="2"
                                class="form-control input-lg p-text-area"></textarea>
                        </form>
                        <footer class="panel-footer">
                            <button class="btn btn-warning pull-right">Send</button>
                            <ul class="nav nav-pills">
                            </ul>
                        </footer>
                    </div>
                    {% endif %}
                    <div class="panel">
                        <div class="bio-graph-heading">
                            {{user_info.other_info.about_me}}
                        </div>
                        <div class="panel-body bio-graph-info">
                            <h1>Bio Graph</h1>
                            <div class="row">
                                <div class="bio-row">
                                    <p><span>First Name </span>: {{user_info.main_info.first_name}}</p>
                                </div>
                                <div class="bio-row">
                                    <p><span>Last Name </span>: {{user_info.main_info.last_name}}</p>
                                </div>
                                <div class="bio-row">
                                    <p><span>Current Project </span>: {{user_info.other_info.current_project}}</p>
                                </div>
                                <div class="bio-row">
                                    <p><span>Rol </span>: {{user_info.other_info.role}}</p>
                                </div>
                                <div class="bio-row">
                                    <p><span>Tasks completed </span>: {{user_info.other_info.tasks_completed}}</p>
                                </div>
                                <div class="bio-row">
                                    <p><span>Total pull request </span>: {{user_info.other_info.pull_requests}}</p>
                                </div>
                                <div class="bio-row">
                                    <p><span>City</span>: {{user_info.other_info.city}}</p>
                                </div>
                                <div class="bio-row">
                                    <p><span>Country</span>: {{user_info.other_info.country}}</p>
                                </div>
                                <div class="bio-row">
                                    <p><span>Phone </span>: {{user_info.other_info.phone}}</p>
                                </div>
                                <div class="bio-row">
                                    <p><span>Email </span>: {{user_info.main_info.email}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="panel">
                                    <div class="panel-body">
                                        <div class="bio-chart">
                                            <div style="display:inline;width:100px;height:100px;"><canvas width="100"
                                                    height="100px"></canvas><input class="knob" data-width="100"
                                                    data-height="100" data-displayprevious="true" data-thickness=".2"
                                                    value="35" data-fgcolor="#e06b7d" data-bgcolor="#e8e8e8"
                                                    style="width: 54px; height: 33px; position: absolute; vertical-align: middle; margin-top: 33px; margin-left: -77px; border: 0px; font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 20px; line-height: normal; font-family: Arial; text-align: center; color: rgb(224, 107, 125); padding: 0px; -webkit-appearance: none; background: none;">
                                            </div>
                                        </div>
                                        <div class="bio-desk">
                                            <h4 class="red">Envato Website</h4>
                                            <p>Started : 15 July</p>
                                            <p>Deadline : 15 August</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="panel">
                                    <div class="panel-body">
                                        <div class="bio-chart">
                                            <div style="display:inline;width:100px;height:100px;"><canvas width="100"
                                                    height="100px"></canvas><input class="knob" data-width="100"
                                                    data-height="100" data-displayprevious="true" data-thickness=".2"
                                                    value="63" data-fgcolor="#4CC5CD" data-bgcolor="#e8e8e8"
                                                    style="width: 54px; height: 33px; position: absolute; vertical-align: middle; margin-top: 33px; margin-left: -77px; border: 0px; font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 20px; line-height: normal; font-family: Arial; text-align: center; color: rgb(76, 197, 205); padding: 0px; -webkit-appearance: none; background: none;">
                                            </div>
                                        </div>
                                        <div class="bio-desk">
                                            <h4 class="terques">ThemeForest CMS </h4>
                                            <p>Started : 15 July</p>
                                            <p>Deadline : 15 August</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="panel">
                                    <div class="panel-body">
                                        <div class="bio-chart">
                                            <div style="display:inline;width:100px;height:100px;"><canvas width="100"
                                                    height="100px"></canvas><input class="knob" data-width="100"
                                                    data-height="100" data-displayprevious="true" data-thickness=".2"
                                                    value="75" data-fgcolor="#96be4b" data-bgcolor="#e8e8e8"
                                                    style="width: 54px; height: 33px; position: absolute; vertical-align: middle; margin-top: 33px; margin-left: -77px; border: 0px; font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 20px; line-height: normal; font-family: Arial; text-align: center; color: rgb(150, 190, 75); padding: 0px; -webkit-appearance: none; background: none;">
                                            </div>
                                        </div>
                                        <div class="bio-desk">
                                            <h4 class="green">VectorLab Portfolio</h4>
                                            <p>Started : 15 July</p>
                                            <p>Deadline : 15 August</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="panel">
                                    <div class="panel-body">
                                        <div class="bio-chart">
                                            <div style="display:inline;width:100px;height:100px;"><canvas width="100"
                                                    height="100px"></canvas><input class="knob" data-width="100"
                                                    data-height="100" data-displayprevious="true" data-thickness=".2"
                                                    value="50" data-fgcolor="#cba4db" data-bgcolor="#e8e8e8"
                                                    style="width: 54px; height: 33px; position: absolute; vertical-align: middle; margin-top: 33px; margin-left: -77px; border: 0px; font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 20px; line-height: normal; font-family: Arial; text-align: center; color: rgb(203, 164, 219); padding: 0px; -webkit-appearance: none; background: none;">
                                            </div>
                                        </div>
                                        <div class="bio-desk">
                                            <h4 class="purple">Adobe Muse Template</h4>
                                            <p>Started : 15 July</p>
                                            <p>Deadline : 15 August</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="user-pull-request" class="invisible">
        <div class="container bootstrap snippets bootdey">
            <div class="row">
                <div class="profile-nav col-md-3">
                    <div class="panel">
                        <div class="user-heading round">
                            <a href="{% url 'profile' username=user_info.main_info.username %}">
                                <img src="{% static user_info.other_info.profile_photo %}" alt="">
                            </a>
                            <h1>{{user_info.main_info.username}}</h1>
                        </div>

                        <ul class="nav nav-pills nav-stacked">
                            <li onclick="activeUserInfo()"><a href="#"> <i class="fa fa-user"></i> Profile</a></li>
                            <li class="active"><a href="#"> <i class="fa fa-calendar"></i> Recent Activity
                                    <!-- <span class="label label-warning pull-right r-activity">9</span></a></li> -->
                            <li onclick="activeNewTask()"><a href="#"> <i class="fa fa-edit"></i> Tasks</a></li>
                        </ul>
                    </div>
                </div>

                <!-- Here are going to be the the task -->

                <div class="profile-info col-md-9">
                    <div class="panel" style="text-align: center; padding: 3%; font-size: 16px;">

                        <p>Here you are the code for the linked list</p>

                    </div>
                    <div class="panel">
                        <div class="panel-body bio-graph-info">
                            <pre>
                                <code data-language="python">

class Node:
    def __init__(self, value):
        self.value = value
        self.prev = None
        self.next = None



class DoublyLinkedList:
    def __init__(self):
        self.head = None
        self.tail = None

    def setHead(self, node):
        if self.head is None:
			self.head = node
			self.tail = node
			return
		self.insertBefore(self.head, node)

    def setTail(self, node):
        if self.head is None:
			self.setHead(node)
			return
		self.insertAfter(self.tail, node)

    def insertBefore(self, node, nodeToInsert):
        if self.nodeInLinkedList(nodeToInsert):
			self.removeConnections(nodeToInsert)
		
		if node == self.head:
			node.prev, nodeToInsert.next = nodeToInsert, node
			self.head = nodeToInsert
			return
		
		prev_node = node.prev
		node.prev, nodeToInsert.next = nodeToInsert, node
		nodeToInsert.prev, prev_node.next = prev_node, nodeToInsert

    def insertAfter(self, node, nodeToInsert):
		if self.nodeInLinkedList(nodeToInsert):
			self.removeConnections(nodeToInsert)
		
		if node == self.tail:
			node.next, nodeToInsert.prev = nodeToInsert, node
			self.tail = nodeToInsert
			return
		
		next_node = node.next
		node.next, nodeToInsert.prev = nodeToInsert, node
		nodeToInsert.next, next_node.prev = next_node, nodeToInsert
		

    def insertAtPosition(self, position, nodeToInsert):
		current_pos = 1
		current_node = self.head
		
		while current_node is not None:
			if current_pos == position:
				self.insertBefore(current_node, nodeToInsert)
				return
			current_pos += 1
			current_node = current_node.next
			
		self.setTail(nodeToInsert)
		

    def removeNodesWithValue(self, value):
        current_node = self.head
		
		while current_node is not None:
			if current_node.value == value:
				
				node_to_remove = current_node
				current_node = current_node.next
				self.removeConnections(node_to_remove)
				continue
			current_node = current_node.next
			

    def remove(self, node):
        current_node = self.head
		
		while current_node is not None:
			if current_node == node:
				self.removeConnections(current_node)
				return
			current_node = current_node.next

    def containsNodeWithValue(self, value):
        current_node = self.head
		
		while current_node is not None:
			if current_node.value == value:
				return True
			current_node = current_node.next
		
		return False
	
	def removeConnections(self, node):
		if node.prev is None and node.next is None:
			self.head = None
			self.tail = None
		elif node.prev is None:
			self.head, node.next.prev = node.next, None
		elif node.next is None:
			self.tail, node.prev.next = node.prev, None
		else:
			node.prev.next, node.next.prev = node.next, node.prev
		
		node.next = None
		node.prev = None
	
	def nodeInLinkedList(self, node):
		current_node = self.head
		while current_node is not None:
			if current_node == node:
				return True
			current_node = current_node.next
		return False

                                </code>
                            </pre>

                        </div>
                    </div>
                    {% if not own_profile %}
                    <div class="panel">
                        <form>
                            <textarea placeholder="Send message" rows="2"
                                class="form-control input-lg p-text-area"></textarea>
                        </form>
                        <footer class="panel-footer">
                            <button class="btn btn-warning pull-right">Send</button>
                            <ul class="nav nav-pills">
                            </ul>
                        </footer>
                    </div>
                    {% endif %}
                </div>
                {% load my_filters %}
                {% for n in 5|times %}

                <div class="profile-nav col-md-3">
                </div>

                <div class="profile-info col-md-9">
                    <div class="panel" style="text-align: center; padding: 3%; font-size: 16px;">

                        <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor
                            invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam
                            et</p>

                    </div>
                    <div class="panel">
                        <div class="panel-body bio-graph-info">
                            <pre>
                                <code data-language="python">
Lorem ipsum dolor sit amet consectetur adipisicing elit. Maxime mollitia,
molestiae quas vel sint commodi repudiandae consequuntur voluptatum laborum
numquam blanditiis harum quisquam eius sed odit fugiat iusto fuga praesentium
optio, eaque rerum! Provident similique accusantium nemo autem. Veritatis
obcaecati tenetur iure eius earum ut molestias architecto voluptate aliquam
nihil, eveniet aliquid culpa officia aut! Impedit sit sunt quaerat, odit,
tenetur error, harum nesciunt ipsum debitis quas aliquid. Reprehenderit,
quia. Quo neque error repudiandae fuga? Ipsa laudantium molestias eos 
sapiente officiis modi at sunt excepturi expedita sint? Sed quibusdam
recusandae alias error harum maxime adipisci amet laborum. Perspiciatis 
minima nesciunt dolorem! Officiis iure rerum voluptates a cumque velit 
quibusdam sed amet tempora. Sit laborum ab, eius fugit doloribus tenetur 
fugiat, temporibus enim commodi iusto libero magni deleniti quod quam 
consequuntur! Commodi minima excepturi repudiandae velit hic maxime
doloremque. Quaerat provident commodi consectetur veniam similique ad 
earum omnis ipsum saepe, voluptas, hic voluptates pariatur est explicabo 
fugiat, dolorum eligendi quam cupiditate excepturi mollitia maiores labore 
suscipit quas? Nulla, placeat. Voluptatem quaerat non architecto ab laudantium
modi minima sunt esse temporibus sint culpa, recusandae aliquam numquam 
totam ratione voluptas quod exercitationem fuga. Possimus quis earum veniam 
quasi aliquam eligendi, placeat qui corporis!
                                </code>
                            </pre>
                            <i class="fas fa-check fa-2x" style="color: green;"></i>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <div id="user-new-task" class="invisible">
        <div class="container bootstrap snippets bootdey">
            <div class="row">
                <div class="profile-nav col-md-3">
                    <div class="panel">
                        <div class="user-heading round">
                            <a href="{% url 'profile' username=user_info.main_info.username %}">
                                <img src="{% static user_info.other_info.profile_photo %}" alt="">
                            </a>
                            <h1>{{user_info.main_info.username}}</h1>
                        </div>

                        <ul class="nav nav-pills nav-stacked">
                            <li onclick="activeUserInfo()"><a href="#"> <i class="fa fa-user"></i> Profile</a></li>
                            <li onclick="activePullRequest()"><a href="#"> <i class="fa fa-calendar"></i> Recent
                                    Activity
                                    <span class="label label-warning pull-right r-activity"></span></a></li>
                            <li class="active"><a href="#"> <i class="fa fa-edit"></i> Tasks</a></li>
                        </ul>
                    </div>
                </div>

                {% if current_user.user_level > 0 %}
                <div class="profile-info col-md-9">
                    <div class="panel" style="text-align: center; padding: 3%; font-size: 16px;">

                        <p>Set New Task</p>

                    </div>
                    <form action="" id="new-task-form" autocomplete="off" autocapitalize="on">
                        {% csrf_token %}
                        <div class="panel">
                            <div class="panel-body bio-graph-info">
                                <label for="working-on">New task</label>
                                <input type="text" name="working-on" class="form-control" id="task-input">
                            </div>
                        </div>
                        <div class="panel">
                            <textarea placeholder="Details" rows="2" name="details" id="details-input"
                                class="form-control input-lg p-text-area"></textarea>
                            <footer class="panel-footer">
                                <button type="submit" class="btn btn-warning pull-right">Send</button>
                                <ul class="nav nav-pills">
                                </ul>
                            </footer>
                        </div>
                        <input type="hidden" value="{{user_info.main_info.id}}" id="user-id">
                    </form>
                </div>
                {% endif %}


                <div class="container bootstrap snippets bootdey" id="tasks">
                    {% for task in tasks %}

                    <div class="row">

                        <div class="profile-nav col-md-3">
                        </div>
                        <div class="profile-info col-md-9">
                            <div class="panel" style="text-align: center; padding: 3%; font-size: 16px;">

                                <p>{{task.task}}</p>

                            </div>

                            <div class="panel" style="padding: 3%;" id="{{task.task}}">

                                {{task.details}}

                                <hr>

                                {% if task.completed %}
                                <i class="fas fa-check fa-2x" style="color: green; margin: 1% 0 1% 3%;"></i>
                                {% elif not task.waiting_for_aproval %}

                                {% if own_profile %}

                                <!-- button to mark the task as completed and wait for aproval -->
                                <div class="col-lg" id="btn-complete-task">
                                    <div class="card h-100">
                                        {% csrf_token %}
                                        <button class="btn btn-primary" onclick="completeTask('#{{task.task}}')">Mark as
                                            completed</button>
                                        <input type="hidden" value="{{task.id}}" id="task-id">
                                        <input type="hidden" value="{{user_info.main_info.username}}" id="username">
                                    </div>
                                </div>

                                {% else %}

                                <p>Working on</p>

                                {% endif %}

                                {% elif task.waiting_for_aproval %}


                                <div class="col-lg" style="text-align: center;">
                                    <div class="card h-100">
                                        <p>Waiting for approval...</p>


                                         <!-- button to mark the task as completed -->
                                        
                                        {% if current_user.user_level > 0 %}
                                        {% csrf_token %}

                                        <button type="button" id="decline" class="btn btn-danger btn-lg" onclick="completeTask('#{{task.task}}', false)">
                                            Decline
                                        </button>
                                        <button type="button" id="accept" class="btn btn-success btn-lg" onclick="completeTask('#{{task.task}}', true)">
                                            Accept
                                        </button>

                                        <input type="hidden" value="{{task.id}}" id="task-id">
                                        <input type="hidden" value="{{user_info.main_info.username}}" id="username">
                                        {% endif %}
                                    </div>
                                </div>

                                {% endif %}
                            </div>

                        </div>

                    </div>

                    {% endfor %}

                    {% for n in 5|times %}
                    <div class="row">

                        <div class="profile-nav col-md-3">
                        </div>
                        <div class="profile-info col-md-9">
                            <div class="panel" style="text-align: center; padding: 3%; font-size: 16px;">

                                <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam</p>

                            </div>

                            <div class="panel" style="padding: 3%;">

                                Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor
                                invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et
                                accusam
                                et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est
                                Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
                                diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam
                                voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd
                                gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit
                                amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et
                                dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo
                                dolores
                                et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor
                                sit
                                amet.

                                <hr>

                                <i class="fas fa-check fa-2x" style="color: green; margin: 1% 0 1% 3%;"></i>

                            </div>

                        </div>

                    </div>
                    {% endfor %}

                </div>
            </div>

        </div>
    </div>

</body>

</html>